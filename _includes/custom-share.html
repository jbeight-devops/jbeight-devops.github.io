<section class="page__share">
  <h4 class="page__share-title">Share</h4>

  <button
    id="copy-link-btn"
    class="btn btn--primary"
    onclick="copyToClipboard()"
    title="링크 복사"
  >
    <i class="fas fa-fw fa-link" aria-hidden="true"></i><span> Copy Link</span>
  </button>

  <div
    id="copy-success"
    style="display: none; color: #28a745; margin-top: 10px; font-size: 14px"
  >
    <i class="fas fa-check" aria-hidden="true"></i> Link copied to clipboard!
  </div>
</section>

<script>
  function copyToClipboard() {
    const url = window.location.href;

    // 모던 브라우저용 Clipboard API
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard
        .writeText(url)
        .then(function () {
          showCopySuccess();
        })
        .catch(function () {
          fallbackCopyToClipboard(url);
        });
    } else {
      // 구형 브라우저용 fallback
      fallbackCopyToClipboard(url);
    }
  }

  function fallbackCopyToClipboard(text) {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.position = "fixed";
    textArea.style.left = "-999999px";
    textArea.style.top = "-999999px";
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
      document.execCommand("copy");
      showCopySuccess();
    } catch (err) {
      console.error("링크 복사 실패:", err);
    } finally {
      document.body.removeChild(textArea);
    }
  }

  function showCopySuccess() {
    const successMsg = document.getElementById("copy-success");
    successMsg.style.display = "block";

    setTimeout(function () {
      successMsg.style.display = "none";
    }, 3000);
  }
</script>
